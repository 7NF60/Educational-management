<!DOCTYPE HTML>
<!DOCTYPE html PUBLIC "">
<html lang="zh-CN" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <title>教务后台管理系统</title>
    <link rel="stylesheet" type="text/css" href="css/dashboard.css" />
    <link rel="stylesheet" type="text/css" href="css/bootstrap.min.css" />

    <script src="https://cdn.staticfile.org/vue/2.4.2/vue.min.js"></script>
    <script src="https://cdn.staticfile.org/vue-resource/1.5.1/vue-resource.min.js"></script>

    <script type="text/javascript" src="js/jquery.min.js"></script>
    <link rel="stylesheet" type="text/css" href="css/bootstrap.min.css" />
    <script type="text/javascript" src="js/bootstrap.min.js"></script>
    <link rel="stylesheet" type="text/css" href="css/zftal-ui.css" />
    <link href="css/selectcourse.css" rel="stylesheet" type="text/css">

    <style>
        .temp{display: inline-block;width: 22%;margin-right: 32px;}
        .main{background-color: #00d9ff0d;position:relative;margin-top: 20px;}
        .jie{width:4%;display: inline-block;text-align: center; float:left;border: 0.5px solid #b7bec3;padding-top:5px;padding-bottom:5px;}
        .stage{width:5%;display: inline-block;text-align: center;float:left;border: 0.5px solid #b7bec3;padding-top:5px;padding-bottom:5px;}
        .weekhead{width:13%;float:left;display: inline-block;text-align: center;border: 0.5px solid #b7bec3;padding-top:5px;padding-bottom:5px;}
        .title{margin-bottom:20px;}
        .day{height:500px;}
        .evening{height:360px;}
        .day_title{text-align:center;width:5%;font-size:20px;float: left;display: inline-block;height:500px;line-height: 250px;font-size:30px;border: 0.5px solid #b7bec3;}
        .evening_title{text-align:center;width:5%;font-size:20px;float: left;display: inline-block;height:300px;line-height: 150px;font-size:30px;border: 0.5px solid #b7bec3;}
        .even_numset{width:4%;float:left;height:300px;border: 0.5px solid #b7bec3;}
        .numset{width:4%;float:left;height:500px;border: 0.5px solid #b7bec3;}
        .jie-item{height:100px;border-bottom: 0.5px solid #b7bec3;line-height: 100px;text-align: center;font-size:20px;font-weight:bolder;}
        .item-col{height:500px;width:13%;border: 0.5px solid #b7bec3;float:left;display: inline-block;}
        .item-col-evening{height:300px;width:13%;border: 0.5px solid #b7bec3;float:left;display: inline-block;}
        .each-col{position:absolute;top:77px;height:1300px;width:13%;}

        .item-class{position: absolute;width: 100%;height: 200px;text-align: center;border-top: 0.3px solid #b7bec3;border-bottom: 0.3px solid #b7bec3;}
        .content-class{width: 90%;display: inline-block;text-align: left;height: 140px;overflow: hidden;}
        .content-row{margin-top: 10px;}
        .content_tip{font-weight: bolder;}
    </style>

</head>

<body>
<nav class="navbar navbar-dark sticky-top bg-primary flex-md-nowrap p-0">
    <a class="navbar-brand col-sm-3 col-md-2 mr-0" href="#">教务后台管理系统</a>
    <!--input class="form-control form-control-dark w-100" type="text" placeholder="Search" aria-label="Search"-->
    <ul class="navbar-nav px-3">
        <li class="nav-item text-nowrap">
            <a class="nav-link" href="#">登出</a>
        </li>
    </ul>
</nav>

<div class="container-fluid">
    <div class="row">
        <nav class="col-md-2 d-none d-md-block bg-light sidebar">
            <div class="sidebar-sticky">
                <ul class="nav flex-column">
                    <li class="nav-item">
                        <a class="nav-link" href="#">
                            <span data-feather="home"></span>
                            首页
                            <span class="sr-only">(current)</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">
                            <span data-feather="check-square"></span>
                            权限管理
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">
                            <span data-feather="users"></span>
                            学生信息维护
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">
                            <span data-feather="users"></span>
                            教师信息维护
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">
                            <span data-feather="calendar"></span>
                            学期管理
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" href="#">
                            <span data-feather="bar-chart-2"></span>
                            排课管理
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">
                            <span data-feather="book-open"></span>
                            毕业设计管理
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">
                            <span data-feather="help-circle"></span>
                            帮助
                        </a>
                    </li>
                </ul>
            </div>
        </nav>
        <main role="main" class="col-md-9 ml-sm-auto col-lg-10 pt-3 px-4">
            <!DOCTYPE html >
            <html>
            <head>
                <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
                <title>排课管理</title>
                <script language="javascript"  type="text/javascript">
                    <!--课程安排-->
                    var flag_1=0;
                    function $(id)
                    {
                        return document.getElementById(id);
                    }
                </script>
                <script language="javascript"  type="text/javascript">
                    <!--课表查询-->
                    var flag_0=0;
                    function $(id)
                    {
                        return document.getElementById(id);
                    }
                </script>

            </head>
            <style>
                .body1 {
                    background-color:#d0e4fe;
                }
                .Dialog{
                    color:#3232cd;
                    background-color: lightgrey;
                    width: 800px;
                    border: 5px solid grey;
                }
                course_form{

                }
            </style>
            <body class="body1">
            <!--下面是课程表-->
            <div id="classscheduling">
            <div class="course_form">
                <fieldset><legend><h5>课程表查询</h5></legend>
                    <a>学年：</a><select v-model="table_year" style="height:25px;width:164px">
                        <option value="2019-2020学年">2019-2020学年</option>
                        <option value="2018-2019学年">2018-2019学年</option>
                        <option value="2017-2018学年">2017-2018学年</option>
                        <option value="2016-2017学年">2016-2017学年</option>
                        <option value="2015-2016学年">2015-2016学年</option>
                        <option value="2014-2015学年">2014-2015学年</option>
                    </select>
                    <a>学期：</a><select v-model="table_semester" style="height:25px;width:164px">
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                    </select>
                    <a>专业：</a><input v-model="table_major" name="专业" type="text" />
                    <a>年级：</a><select id = 'table_grade' v-model="table_grade" style="height:25px;width:164px">
                        <option value="1">大一</option>
                        <option value="2">大二</option>
                        <option value="3">大三</option>
                        <option value="4">大四</option>
                    </select>
                    <input type="button" id="btn0" value="查询" @click="getTable()"/>
                    <div id="dv0" style="display:none">
                        <HR>
                        <div id="table">
                            <div class="header">
                                <div class="stage">时间段</div>
                                <div class="jie">节次</div>
                                <div class="weekhead">星期一</div>
                                <div class="weekhead">星期二</div>
                                <div class="weekhead">星期三</div>
                                <div class="weekhead">星期四</div>
                                <div class="weekhead">星期五</div>
                                <div class="weekhead">星期六</div>
                                <div class="weekhead">星期日</div>
                            </div>

                            <!--上午的课表-->
                            <div class="day">
                                <div class="day_title">
                                    上<br>午
                                </div>
                                <div class="numset">
                                    <div class="jie-item">1</div>
                                    <div class="jie-item">2</div>
                                    <div class="jie-item">3</div>
                                    <div class="jie-item">4</div>
                                    <div class="jie-item">5</div>
                                </div>

                                <!--下面是七列，代表的是星期几下午的课表-->
                                <div class="item-col">
                                    <div class="each-col" id="col-1">
                                    </div>
                                </div>
                                <div class="item-col">
                                    <div class="each-col" id="col-2">

                                    </div>
                                </div>
                                <div class="item-col">
                                    <div class="each-col" id="col-3">

                                    </div>
                                </div>
                                <div class="item-col">
                                    <div class="each-col" id="col-4">

                                    </div>
                                </div>
                                <div class="item-col">
                                    <div class="each-col" id="col-5">

                                    </div>
                                </div>
                                <div class="item-col">
                                    <div class="each-col" id="col-6">

                                    </div>
                                </div>
                                <div class="item-col">
                                    <div class="each-col" id="col-7">

                                    </div>
                                </div>
                            </div>

                            <!--下午的课表-->
                            <div class="day">
                                <div class="day_title">
                                    下<br>午
                                </div>
                                <div class="numset">
                                    <div class="jie-item">6</div>
                                    <div class="jie-item">7</div>
                                    <div class="jie-item">8</div>
                                    <div class="jie-item">9</div>
                                    <div class="jie-item">10</div>
                                </div>

                                <!--下面是七列，代表的是星期几下午的课表-->
                                <div class="item-col"></div>
                                <div class="item-col"></div>
                                <div class="item-col"></div>
                                <div class="item-col"></div>
                                <div class="item-col"></div>
                                <div class="item-col"></div>
                                <div class="item-col"></div>
                            </div>

                            <!--晚上的课表-->
                            <div class="evening">
                                <div class="evening_title">
                                    晚<br>上
                                </div>
                                <div class="even_numset">
                                    <div class="jie-item">11</div>
                                    <div class="jie-item">12</div>
                                    <div class="jie-item">13</div>
                                </div>
                                <div class="item-col-evening"></div>
                                <div class="item-col-evening"></div>
                                <div class="item-col-evening"></div>
                                <div class="item-col-evening"></div>
                                <div class="item-col-evening"></div>
                                <div class="item-col-evening"></div>
                                <div class="item-col-evening"></div>
                            </div>
                        </div>
                    </div>
                </fieldset>
            </div>
            <!--下面是课程安排-->
            <div  class="course_mag" style="">
                <fieldset><legend><h5>课程安排</h5></legend>
                    <a>学年：</a><select id = 'change_year' v-model="input_year" style="height:25px;width:164px">
                        <option value="2019-2020学年">2019-2020学年</option>
                        <option value="2018-2019学年">2018-2019学年</option>
                        <option value="2017-2018学年">2017-2018学年</option>
                        <option value="2016-2017学年">2016-2017学年</option>
                        <option value="2015-2016学年">2015-2016学年</option>
                        <option value="2014-2015学年">2014-2015学年</option>
                    </select>
                    <a>学期：</a><select id = 'change_semester' v-model="input_semester" style="height:25px;width:164px">
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                    </select>
                    <a>专业：</a><input id="change_majorName" v-model="input_majorName" name="专业" type="text" />
                    <a>年级：</a><select id = 'change_grade' v-model="input_grade" style="height:25px;width:164px">
                        <option value="1">大一</option>
                        <option value="2">大二</option>
                        <option value="3">大三</option>
                        <option value="4">大四</option>
                    </select>
                    <button type="button" id="btn1"   @click="search()">查询</button>
                    <div id="dv1" style="display:none">
                        <HR>
                        <table width="75%" border="2" cellspacing="1.5" cellpadding="5">
                            <thead>
                            <tr align="center">
                                <th>课程号</th>
                                <th>课程名</th>
                                <th>开课学院</th>
                                <th>课程描述</th>
                                <th>是否已开</th>
                                <th>操作</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr v-for="course in allWillCourses">
                                <td>{{course.cno}}</td>
                                <td>{{course.cname}}</td>
                                <td>{{course.college}}</td>
                                <td>{{course.description}}</td>
                                <td>{{course.ifOpen}}</td>
                                <td>
                                    <input type="button" value="课程安排" @click="eachCourse(course)">
                                </td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </fieldset>
            </div>
            <dialog class="Dialog" id="Dialog">
                <h3 style="text-align:center">课程安排</h3>

                <script language="javascript"  type="text/javascript">
                    var flag_2=0;
                    function $(id)
                    {
                        return document.getElementById(id);
                    }
                </script>
                <script language="javascript"  type="text/javascript">
                    var flag_3=0;
                    function $(id)
                    {
                        return document.getElementById(id);
                    }

                </script>
                <div id="div0">
                    <li style="height:27px">教师安排</li><hr>
                    <a>教师：</a>
                    <input type="search"  class="header_search" id="oneTeacher" placeholder="输入教师工号或名字"/>
                    <input type="button" id="btn3"  value="查询"  @click="searchTeacher()">
                    <div id ="div01" style="display:block">
                        <br>
                        <table width="75%" border="2" cellspacing="1.5" cellpadding="5" >
                            <thead>
                            <tr>
                                <td align="center" valign="middle">工号</td>
                                <td align="center" valign="middle">名字</td>
                                <td align="center" valign="middle">性别</td>
                                <td align="center" valign="middle">操作</td>
                            </tr>
                            </thead>
                            <tbody>
                            <!--放后台查询数据返回的结果-->
                            <tr v-for="teacher in allTeachers">
                                <td>{{teacher.tno}}</td>
                                <td>{{teacher.tname}}</td>
                                <td>{{teacher.sex}}</td>
                                <td>
                                    <input type="button" id="oneTeacherButton" value="课程安排" @click="eachTeacher(teacher)">
                                </td>
                            </tr>
                            </tbody>
                        </table>
                        <br>
                    </div>
                </div><hr>
                <div id="div1">
                    <li style="height:27px">教室安排</li><hr>
                    <a>教室：</a>
                    <input type="search" class="header_search" id="classRoom" placeholder="输入教室编号"/>
                    <input type="button" id="btn4"  value="确定" @click="classRoom()">
                </div><hr>
                <div id="div2">
                    <li style="height:27px">时间安排</li><hr>
                    <div id="div4" align="right">
                        <input type="button" id="btn5" value="添加其它时间段" @click="addTime()" >
                    </div>
                    <div id="allTime0">
                        <br>
                        <form  action="" method="get">
                            <label>周数：
                                <select name="time_start" style="width:70px;height:25px" onchange="sel()">
                                    <option value="1">1</option>
                                    <option value="2">2</option>
                                    <option value="3">3</option>
                                    <option value="4">4</option>
                                    <option value="5">5</option>
                                    <option value="6">6</option>
                                    <option value="7">7</option>
                                    <option value="8">8</option>
                                    <option value="9">9</option>
                                    <option value="10">10</option>
                                    <option value="11">11</option>
                                    <option value="12">12</option>
                                    <option value="13">13</option>
                                    <option value="14">14</option>
                                    <option value="15">15</option>
                                    <option value="16">16</option>
                                    <option value="17">17</option>
                                    <option value="18">18</option>
                                    <option value="19">19</option>
                                    <option value="20">20</option>
                                </select>
                            </label>
                            <label>至
                                <select  name="time_end" style="width:70px;height:25px">
                                    <option value="1">1</option>
                                    <option value="2">2</option>
                                    <option value="3">3</option>
                                    <option value="4">4</option>
                                    <option value="5">5</option>
                                    <option value="6">6</option>
                                    <option value="7">7</option>
                                    <option value="8">8</option>
                                    <option value="9">9</option>
                                    <option value="10">10</option>
                                    <option value="11">11</option>
                                    <option value="12">12</option>
                                    <option value="13">13</option>
                                    <option value="14">14</option>
                                    <option value="15">15</option>
                                    <option value="16">16</option>
                                    <option value="17">17</option>
                                    <option value="18">18</option>
                                    <option value="19">19</option>
                                    <option value="20">20</option>
                                </select>
                            </label>
                            <label>星期：
                                <select name="week" style="width:70px;height:25px">
                                    <option value="1">星期一</option>
                                    <option value="2">星期二</option>
                                    <option value="3">星期三</option>
                                    <option value="4">星期四</option>
                                    <option value="5">星期五</option>
                                    <option value="6">星期六</option>
                                    <option value="7">星期日</option>
                                </select>
                            </label>
                            <label>节数：
                                <select name="section1" style="width:70px;height:25px">
                                    <option value="1">第一节</option>
                                    <option value="2">第二节</option>
                                    <option value="3">第三节</option>
                                    <option value="4">第四节</option>
                                    <option value="5">第五节</option>
                                    <option value="6">第六节</option>
                                    <option value="7">第七节</option>
                                    <option value="8">第八节</option>
                                    <option value="9">第九节</option>
                                    <option value="10">第十节</option>
                                    <option value="11">第十一节</option>
                                    <option value="12">第十二节</option>
                                    <option value="13">第十三节</option>
                                </select>
                            </label>
                            <label>至
                                <select  name="section2" style="width:70px;height:25px">
                                    <option value="1">第一节</option>
                                    <option value="2">第二节</option>
                                    <option value="3">第三节</option>
                                    <option value="4">第四节</option>
                                    <option value="5">第五节</option>
                                    <option value="6">第六节</option>
                                    <option value="7">第七节</option>
                                    <option value="8">第八节</option>
                                    <option value="9">第九节</option>
                                    <option value="10">第十节</option>
                                    <option value="11">第十一节</option>
                                    <option value="12">第十二节</option>
                                    <option value="13">第十三节</option>
                                </select>
                            </label>
                            <!--<input type="button" id="btn6" value="删除" onclick="delete()">-->
                        </form>
                    </div>
                </div>
                <hr><br>
                <div id="div5" align="right" style=" padding-left:100px">
                    <input class="md-close" type="button" value="确认" @click="addAll()">
                    <a style="padding-right:100px"></a>
                    <input class="md-close" type="button" value="取消" @click="deleteCourse()">
                </div>
            </dialog>
            <script>
                function op2(){

                }
            </script>
            </div>
            </body>
            </html>
        </main>
    </div>
</div>


</body>

<script>
    var app = new Vue({
        el:'#classscheduling',
        data:{
            i:1,
            sum:1,
            allWillCourses:[],
            allTeachers:[],
            getWillCourses:"",
            input_year:"",
            input_semester:"",
            input_majorName:"",
            input_grade:"",
            input_tno:"",
            input_tname:"",
            nowCourseCno:"",
            nowCourseTno:"",
            nowCourseYear:"",
            nowCourseSemester:"",
            nowCourseMajorName:"",
            nowCourseGrade:"",
            nowCourseStatus:"",
            nowCourseCapacity:"",
            nowCourseAddress:"",
            nowCourseTime:"",

            table_year:"",
            table_semester:"",
            table_major:"",
            table_grade:"",
            allCourses:[]
        },
        methods:{
            deleteCourse:function(){

                this.$http.post("/deleteCourse", {
                        cno:this.nowCourseCno,
                        year:this.nowCourseYear,
                        semester:this.nowCourseSemester,
                        majorName:this.nowCourseMajorName,
                        grade:this.nowCourseGrade
                    },
                    {emulateJSON:true}).then(function (value) {
                        console.log("222")
                        this.deleteCourse=value.body.data;
                        console.log(this.deleteCourse);
                        /*开始操作*/
                        alert("取消成功")
                        Dialog.close();
                        this.search()
                    },
                    function (reason) {
                        alert("请求出错")
                    }
                );

            }
            ,
            parserHtml:function(cInfo){
                console.log("333333")
                console.log(cInfo)
                var div=document.createElement("div");
                div.setAttribute("class","item-class");
                var temp = cInfo.course_time.split(",")[2];
                temp = temp.substring(0,temp.length-1);
                var start = temp.split("-")[0];
                var end = temp.split("-")[1];
                var height=(end-start+1)*100;
                var top=(start-1)*100+60;
                div.style.height=""+height+"px";
                div.style.top=""+top+"px";
                var margintop=(height-140)/2;
                var content_class=document.createElement("div");
                content_class.setAttribute("class","content-class");
                content_class.style.marginTop=""+margintop+"px";

                content_class.innerHTML="<h5>"+cInfo.cname+"</h5>" +
                    "<div class='content-row'><span class='content_tip'>时间：</span>"+cInfo.course_time+"</div>" +
                    "<div class='content-row'><span class='content_tip'>地点：</span>"+cInfo.address+"</div>" +
                    "<div class='content-row'><span class='content_tip'>教师：</span>"+cInfo.tname+"</div>";
                div.append(content_class);

                var insertid=parseInt(cInfo.course_time.split(",")[1]);
                document.getElementById("col-"+insertid).appendChild(div);
                //colset[insertid].append(div);
            },
            getTable:function () {
                console.log("hello")
                this.$http.post("/getAllCourses", {
                        year:this.table_year.substring(0,4),
                        semester:this.table_semester,
                        major:this.table_major,
                        grade:this.table_grade
                    },
                    {emulateJSON:true}).then(function (value) {
                        console.log("222")
                        this.allCourses=value.body.data;
                        console.log(this.allCourses);
                        /*开始操作*/
                        for(var i=1;i<8;i++){
                            document.getElementById("col-"+i).innerHTML="";
                        }
                        for(var i=0;i<this.allCourses.length;i++){
                            this.parserHtml(this.allCourses[i]);
                        }
                        dv0.style.display="block";
                    },
                    function (reason) {
                        alert("请求出错")
                    }
                );

            },

            search:function() {
                year = this.input_year.substring(0,4);
                console.log(this.input_year)
                console.log(this.input_semester)
                console.log(this.input_majorName)
                console.log(this.input_grade)
                dv1.style.display="block";
                this.$http.post("/getWillCourses", {
                        year:this.input_year.substring(0,4),
                        semester:this.input_semester,
                        majorName:this.input_majorName,
                        grade:this.input_grade
                    },
                    {emulateJSON:true}).then(function (value) {
                    console.log("222");
                    this.allWillCourses=value.body.data;

                    },
                    function (reason) {
                        alert("请求出错")
                    }
                    );
            },
            eachCourse:function (course) {
                this.allTeachers = [];
                this.nowCourseYear = this.input_year.substring(0, 4);
                this.nowCourseSemester = this.input_semester;
                this.nowCourseMajorName = this.input_majorName;
                this.nowCourseGrade = this.input_grade;
                this.nowCourseCno = course.cno;
                console.log("1111");
                Dialog.showModal();
            },
            eachTeacher:function(teacher) {
                oneTeacherButton.disable=false;
                this.nowCourseTno = teacher.tno;
                alert("已添加");
            },
            classRoom:function(){
                this.nowCourseAddress = document.getElementById("classRoom").valueOf().value;
                alert("已添加")
            },
            addTime:function(){
                    var sourceNode = document.getElementById("allTime0");
                    var clonedNode = sourceNode.cloneNode(true);
                    clonedNode.setAttribute("id", "allTime" + this.i);
                    sourceNode.parentNode.appendChild(clonedNode);
                    this.i=this.i+1;
                    this.sum = this.sum + 1;
            },
            addAll:function(){
                /*这里需要生成时间字符串*/
                console.log(this.sum)
                var array = "";
                for (var id = 0;id<this.sum;id++){
                    if(id != 0){array = array + ";"}
                    var string = "(";
                    console.log(document.getElementsByName("time_start")[id].value);
                    string = string + document.getElementsByName("time_start")[id].value;
                    string = string + "-" + document.getElementsByName("time_end")[id].value+",";
                    string = string + document.getElementsByName("week")[id].value + ",";
                    string = string + document.getElementsByName("section1")[id].value;
                    string = string + "-" + document.getElementsByName("section2")[id].value + ")";
                    array = array + string;
                }
                console.log(array)
                this.nowCourseTime = array;
                /*这里需要发送请求*/
                this.$http.post("/addCourse", {
                    cno:this.nowCourseCno,
                    tno:this.nowCourseTno,
                    year:this.nowCourseYear,
                    semester:this.nowCourseSemester,
                    majorName:this.nowCourseMajorName,
                    grade:this.nowCourseGrade,
                    status:this.nowCourseStatus,
                    capacity:150,
                    address:this.nowCourseAddress,
                    time:this.nowCourseTime
                    },
                    {emulateJSON:true}).then(function (value) {
                        console.log("222");
                        console.log(value);
                        if(value) alert("添加成功")
                        Dialog.close();
                        this.search();
                    },
                    function (reason) {
                        alert("请求出错")
                    }
                );
            },
            searchTeacher:function(){
                this.allTeachers = [];
                var temp = document.getElementById("oneTeacher").valueOf().value
                var flag = 1;
                for(var x in temp){
                    if(temp[x]<"0" || temp[x] >"9"){
                        flag = 2;
                    }
                }
                if(flag==1){this.input_tname="";this.input_tno=temp;}
                else{this.input_tno="";this.input_tname=temp;}

                if(this.input_tno == ""){this.input_tno=-1;}
                if(this.input_tname == ""){this.input_tname="null";}

                this.$http.post("/getTeacherByTnoAndTname", {
                        tno:this.input_tno,
                        tname:this.input_tname
                    },
                    {emulateJSON:true}).then(function (value) {
                        console.log("222");
                        this.allTeachers=value.body.data;
                    },
                    function (reason) {
                        alert("请求出错")
                    }
                );
            }

        }
    });


</script>

</html>
