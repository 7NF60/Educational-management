<!DOCTYPE html>
<html xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <!--jQuery核心框架库 用于显示输入框-->
    <script type="text/javascript" src="js/jquery-1.js"></script>
    <!--Bootstrap布局框架-->
    <link rel="stylesheet" type="text/css" href="css/bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="css/zftal-ui.css" />
	<style>
		.temp{display: inline-block;width: 22%;margin-right: 32px;}
		.main{background-color: #00d9ff0d;position:relative;margin-top: 20px;}
		.jie{width:4%;display: inline-block;text-align: center; float:left;border: 0.5px solid #b7bec3;padding-top:5px;padding-bottom:5px;}
		.stage{width:5%;display: inline-block;text-align: center;float:left;border: 0.5px solid #b7bec3;padding-top:5px;padding-bottom:5px;}
		.weekhead{width:13%;float:left;display: inline-block;text-align: center;border: 0.5px solid #b7bec3;padding-top:5px;padding-bottom:5px;}
		.title{margin-bottom:20px;}

		.day{height:500px;}
		.evening{height:360px;}
		.day_title{text-align:center;width:5%;font-size:20px;float: left;display: inline-block;height:500px;line-height: 250px;font-size:30px;border: 0.5px solid #b7bec3;}
		.evening_title{text-align:center;width:5%;font-size:20px;float: left;display: inline-block;height:300px;line-height: 150px;font-size:30px;border: 0.5px solid #b7bec3;}
		.even_numset{width:4%;float:left;height:300px;border: 0.5px solid #b7bec3;}
		.numset{width:4%;float:left;height:500px;border: 0.5px solid #b7bec3;}
		.jie-item{height:100px;border-bottom: 0.5px solid #b7bec3;line-height: 100px;text-align: center;font-size:20px;font-weight:bolder;}
		.item-col{height:500px;width:13%;border: 0.5px solid #b7bec3;float:left;display: inline-block;}
		.item-col-evening{height:300px;width:13%;border: 0.5px solid #b7bec3;float:left;display: inline-block;}
		.each-col{position:absolute;top:77px;height:1300px;width:13%;}

		.item-class{position: absolute;width: 100%;height: 200px;text-align: center;border-top: 0.3px solid #b7bec3;border-bottom: 0.3px solid #b7bec3;}
		.content-class{width: 90%;display: inline-block;text-align: left;height: 140px;overflow: hidden;}
		.content-row{margin-top: 10px;}
		.content_tip{font-weight: bolder;}
	</style>
</head>
<body> 
<header class="navbar-inverse top2">
	<div class="container">
		<a id="topButton" class="navbar-brand">学生课表查询 </a>
	</div>
</header>
<div class="container container-func sl_all_bg" id="yhgnPage" style="min-height: 1597px;">
	<div class="row" id="cxtjDiv">
		<div class="col-md-4 col-sm-5">
			<div class="form-group">
				<label for="xnm1" class="col-sm-4 control-label" id="xn"> <span style="color:red;">*</span>学年 </label>
				<div class="col-sm-8">
					<select name="xnm" id="xnm1" class="form-control chosen-select">
						<option th:value="${semester.start}"  th:each="semester : ${semesterlist}">[[${semester.start}]]-[[${semester.end}]]</option>
					</select>
				</div>
			</div>

			<div class="form-group">
				<label for="xqm1" class="col-sm-4 control-label" id="xq"> <span style="color:red;">*</span>学期 </label>
				<div class="col-sm-8">
					<select name="xqm" id="xqm1" class="form-control chosen-select">
						<option value="">---请选择---</option>
						<option value="3">1</option>
						<option value="12" selected="selected">2</option>
						<option value="16">3</option>
					</select>
				</div>
			</div>
		</div>

		<div class="col-md-4 col-sm-2">
			<div class="form-group">
				<div class="col-sm-12">
					<button type="button" class="btn btn-primary btn-sm pull-right"  onclick="">查询</button>
				</div>
			</div>
		</div>
	</div>
	<div class="row main" id="table">
		<h3 class="title">2017-2018学年第一学期</h3>
		<div class="header">
			<div class="stage">时间段</div>
			<div class="jie">节次</div>
			<div class="weekhead">星期一</div>
			<div class="weekhead">星期二</div>
			<div class="weekhead">星期三</div>
			<div class="weekhead">星期四</div>
			<div class="weekhead">星期五</div>
			<div class="weekhead">星期六</div>
			<div class="weekhead">星期日</div>
		</div>
		<div class="day">
			<div class="day_title">
				上<br>午
			</div>
			<div class="numset">
				<div class="jie-item">1</div>
				<div class="jie-item">2</div>
				<div class="jie-item">3</div>
				<div class="jie-item">4</div>
				<div class="jie-item">5</div>
			</div>
			<div class="item-col">
				<div class="each-col" id="col-1">
					<div class="item-class">
						<div class="content-class">
							<h5>名称</h5>
							<div class="content-row"><span class='content_tip'>时间：</span></div>
							<div class="content-row"><span class='content_tip'>地点：</span></div>
							<div class="content-row"><span class='content_tip'>教师：</span></div>
						</div>
					</div>
				</div>
			</div>
			<div class="item-col">
				<div class="each-col" id="col-2">

				</div>
			</div>
			<div class="item-col">
				<div class="each-col" id="col-3">

				</div>
			</div>
			<div class="item-col">
				<div class="each-col" id="col-4">

				</div>
			</div>
			<div class="item-col">
				<div class="each-col" id="col-5">

				</div>
			</div>
			<div class="item-col">
				<div class="each-col" id="col-6">

				</div>
			</div>
			<div class="item-col">
				<div class="each-col" id="col-7">

				</div>
			</div>
		</div>
		<div class="day">
			<div class="day_title">
				下<br>午
			</div>
			<div class="numset">
				<div class="jie-item">6</div>
				<div class="jie-item">7</div>
				<div class="jie-item">8</div>
				<div class="jie-item">9</div>
				<div class="jie-item">10</div>
			</div>
			<div class="item-col"></div>
			<div class="item-col"></div>
			<div class="item-col"></div>
			<div class="item-col"></div>
			<div class="item-col"></div>
			<div class="item-col"></div>
			<div class="item-col"></div>
		</div>
		<div class="evening">
			<div class="evening_title">
				晚<br>上
			</div>
			<div class="even_numset">
				<div class="jie-item">11</div>
				<div class="jie-item">12</div>
				<div class="jie-item">13</div>
			</div>
			<div class="item-col-evening"></div>
			<div class="item-col-evening"></div>
			<div class="item-col-evening"></div>
			<div class="item-col-evening"></div>
			<div class="item-col-evening"></div>
			<div class="item-col-evening"></div>
			<div class="item-col-evening"></div>
		</div>
	</div>
</div>
<div id="footerID" class="footer">
	<p>计科1601</p>
</div>
</body>
</html>

<!--下面的代码使用jquery 写的，用vue 替换-->
<script>
    function search() {
        var semester =document.getElementById("semester").value;
        var sno="${userinfo.getSno()}";
        $.ajax({
            url:"${pageContext.request.contextPath}/course_table",
            data:{semester:semester,sno:sno},
            type:'post',
            success:function (data,textStatus,XMLHttpRequest) {
                var jsonarr=JSON.parse(data);
                console.log(jsonarr);
                console.log(data);
                var colset=new Array();
                for(var i=1;i<=7;i++)
                    colset.push(document.getElementById("col-"+i));
                for(var i=0;i<jsonarr.length;i++)
                    colset[i].innerHTML="";
                if(jsonarr.length==0)
                {
                    document.getElementById("table").style.display="none";
                    var h3=document.createElement("h3");
                    h3.innerText="没有找到相关信息";
                    var tip=document.getElementById("tip");
                    tip.innerHTML="";
                    tip.style.display="block";
                    tip.appendChild(h3);
                }
                else
                {
                    document.getElementById("table").style.display="block";
                    document.getElementById("tip").style.display="none";
                    for(var i=0;i<colset.length;i++)
                        colset[i].innerHTML="";
                    for(var i=0;i<jsonarr.length;i++)
                    {
                        var div=document.createElement("div");
                        div.setAttribute("class","item-class");
                        var height=(jsonarr[i].endtime-jsonarr[i].begintime+1)*100;
                        var top=(jsonarr[i].begintime-1)*100;
                        div.style.height=""+height+"px";
                        div.style.top=""+top+"px";
                        var margintop=(height-140)/2;
                        var content_class=document.createElement("div");
                        content_class.setAttribute("class","content-class");
                        content_class.style.marginTop=""+margintop+"px";
                        var time="("+jsonarr[i].begintime+"-"+jsonarr[i].endtime+"节) ";
                        time+=""+jsonarr[i].weekbegin+"-"+jsonarr[i].weekend+"周";
                        content_class.innerHTML="<h5>"+jsonarr[i].cname+"</h5>" +
                            "<div class='content-row'><span class='content_tip'>时间：</span>"+time+"</div>" +
                            "<div class='content-row'><span class='content_tip'>地点：</span>"+jsonarr[i].location+"</div>" +
                            "<div class='content-row'><span class='content_tip'>教师：</span>"+jsonarr[i].tname+"</div>";
                        div.append(content_class);
                        var insertid=jsonarr[i].runday-1;
                        colset[insertid].append(div);
                    }
                }
            },
            error:function (xhr,status,error){
                alert("操作失败！");
            }
        });
    }
</script>

